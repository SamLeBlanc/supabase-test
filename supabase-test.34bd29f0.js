parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"ejQK":[function(require,module,exports) {
var t=null;function e(){return t||(t=n()),t}function n(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(t)return r(t[0])}return"/"}function r(t){return(""+t).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}exports.getBundleURL=e,exports.getBaseURL=r;
},{}],"ZOfP":[function(require,module,exports) {
var r=require("./bundle-url").getBundleURL;function e(r){Array.isArray(r)||(r=[r]);var e=r[r.length-1];try{return Promise.resolve(require(e))}catch(n){if("MODULE_NOT_FOUND"===n.code)return new s(function(n,i){t(r.slice(0,-1)).then(function(){return require(e)}).then(n,i)});throw n}}function t(r){return Promise.all(r.map(u))}var n={};function i(r,e){n[r]=e}module.exports=exports=e,exports.load=t,exports.register=i;var o={};function u(e){var t;if(Array.isArray(e)&&(t=e[1],e=e[0]),o[e])return o[e];var i=(e.substring(e.lastIndexOf(".")+1,e.length)||e).toLowerCase(),u=n[i];return u?o[e]=u(r()+e).then(function(r){return r&&module.bundle.register(t,r),r}).catch(function(r){throw delete o[e],r}):void 0}function s(r){this.executor=r,this.promise=null}s.prototype.then=function(r,e){return null===this.promise&&(this.promise=new Promise(this.executor)),this.promise.then(r,e)},s.prototype.catch=function(r){return null===this.promise&&(this.promise=new Promise(this.executor)),this.promise.catch(r)};
},{"./bundle-url":"ejQK"}],"amBb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveFetch=void 0;var e=function(e,t,n,o){return new(n||(n=Promise))(function(r,c){function i(e){try{f(o.next(e))}catch(t){c(t)}}function u(e){try{f(o.throw(e))}catch(t){c(t)}}function f(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,u)}f((o=o.apply(e,t||[])).next())})};const t=t=>{let n;return n=t||("undefined"==typeof fetch?(...t)=>e(void 0,void 0,void 0,function*(){return yield(yield require("_bundle_loader")(require.resolve("cross-fetch"))).fetch(...t)}):fetch),(...e)=>n(...e)};exports.resolveFetch=t;
},{"_bundle_loader":"ZOfP","cross-fetch":[["browser-ponyfill.79a645bd.js","vTPr"],"browser-ponyfill.79a645bd.js.map","vTPr"]}],"fXha":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FunctionsRelayError=exports.FunctionsHttpError=exports.FunctionsFetchError=exports.FunctionsError=void 0;class r extends Error{constructor(r,t="FunctionsError",o){super(r),this.name=t,this.context=o}}exports.FunctionsError=r;class t extends r{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}exports.FunctionsFetchError=t;class o extends r{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}exports.FunctionsRelayError=o;class e extends r{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}exports.FunctionsHttpError=e;
},{}],"KbKQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FunctionsClient=void 0;var t=require("./helper"),e=require("./types"),n=function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{c(r.next(t))}catch(e){i(e)}}function s(t){try{c(r.throw(t))}catch(e){i(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((r=r.apply(t,e||[])).next())})};class r{constructor(e,{headers:n={},customFetch:r}={}){this.url=e,this.headers=n,this.fetch=(0,t.resolveFetch)(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var o;return n(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:s}=r;let c,l={};s&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&("undefined"!=typeof Blob&&s instanceof Blob||s instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",c=s):"string"==typeof s?(l["Content-Type"]="text/plain",c=s):"undefined"!=typeof FormData&&s instanceof FormData?c=s:(l["Content-Type"]="application/json",c=JSON.stringify(s)));const u=yield this.fetch(`${this.url}/${t}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:c}).catch(t=>{throw new e.FunctionsFetchError(t)}),h=u.headers.get("x-relay-error");if(h&&"true"===h)throw new e.FunctionsRelayError(u);if(!u.ok)throw new e.FunctionsHttpError(u);let p,d=(null!==(o=u.headers.get("Content-Type"))&&void 0!==o?o:"text/plain").split(";")[0].trim();return{data:p="application/json"===d?yield u.json():"application/octet-stream"===d?yield u.blob():"multipart/form-data"===d?yield u.formData():yield u.text(),error:null}}catch(n){return{data:null,error:n}}})}}exports.FunctionsClient=r;
},{"./helper":"amBb","./types":"fXha"}],"AtCQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"FunctionsClient",{enumerable:!0,get:function(){return e.FunctionsClient}}),Object.defineProperty(exports,"FunctionsError",{enumerable:!0,get:function(){return r.FunctionsError}}),Object.defineProperty(exports,"FunctionsFetchError",{enumerable:!0,get:function(){return r.FunctionsFetchError}}),Object.defineProperty(exports,"FunctionsHttpError",{enumerable:!0,get:function(){return r.FunctionsHttpError}}),Object.defineProperty(exports,"FunctionsRelayError",{enumerable:!0,get:function(){return r.FunctionsRelayError}});var e=require("./FunctionsClient"),r=require("./types");
},{"./FunctionsClient":"KbKQ","./types":"fXha"}],"wVX0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=e(require("cross-fetch"));function e(t){return t&&t.__esModule?t:{default:t}}class s{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(t,e){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let s=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async t=>{var e,s,r;let i=null,h=null,o=null,n=t.status,l=t.statusText;if(t.ok){if("HEAD"!==this.method){const e=await t.text();""===e||(h="text/csv"===this.headers.Accept?e:this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?e:JSON.parse(e))}const r=null===(e=this.headers.Prefer)||void 0===e?void 0:e.match(/count=(exact|planned|estimated)/),a=null===(s=t.headers.get("content-range"))||void 0===s?void 0:s.split("/");r&&a&&a.length>1&&(o=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(h)&&(h.length>1?(i={code:"PGRST116",details:`Results contain ${h.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},h=null,o=null,n=406,l="Not Acceptable"):h=1===h.length?h[0]:null)}else{const e=await t.text();try{i=JSON.parse(e),Array.isArray(i)&&404===t.status&&(h=[],i=null,n=200,l="OK")}catch(a){404===t.status&&""===e?(n=204,l="No Content"):i={message:e}}if(i&&this.isMaybeSingle&&(null===(r=null==i?void 0:i.details)||void 0===r?void 0:r.includes("Results contain 0 rows"))&&(i=null,n=200,l="OK"),i&&this.shouldThrowOnError)throw i}return{error:i,data:h,count:o,status:n,statusText:l}});return this.shouldThrowOnError||(s=s.catch(t=>{var e,s,r;return{error:{message:`${null!==(e=null==t?void 0:t.name)&&void 0!==e?e:"FetchError"}: ${null==t?void 0:t.message}`,details:`${null!==(s=null==t?void 0:t.stack)&&void 0!==s?s:""}`,hint:"",code:`${null!==(r=null==t?void 0:t.code)&&void 0!==r?r:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,e)}}exports.default=s;
},{"cross-fetch":"vTPr"}],"fdtS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("./PostgrestBuilder"));function t(e){return e&&e.__esModule?e:{default:e}}class s extends e.default{select(e){let t=!1;const s=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",s),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:s,foreignTable:r}={}){const i=r?`${r}.order`:"order",a=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===s?"":s?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const s=void 0===t?"limit":`${t}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:s}={}){const r=void 0===s?"offset":`${s}.offset`,i=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(i,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:s=!1,buffers:r=!1,wal:i=!1,format:a="text"}={}){const l=[e?"analyze":null,t?"verbose":null,s?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),n=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${n}"; options=${l};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}exports.default=s;
},{"./PostgrestBuilder":"wVX0"}],"LPuO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=e(require("./PostgrestTransformBuilder"));function e(r){return r&&r.__esModule?r:{default:r}}class a extends r.default{eq(r,e){return this.url.searchParams.append(r,`eq.${e}`),this}neq(r,e){return this.url.searchParams.append(r,`neq.${e}`),this}gt(r,e){return this.url.searchParams.append(r,`gt.${e}`),this}gte(r,e){return this.url.searchParams.append(r,`gte.${e}`),this}lt(r,e){return this.url.searchParams.append(r,`lt.${e}`),this}lte(r,e){return this.url.searchParams.append(r,`lte.${e}`),this}like(r,e){return this.url.searchParams.append(r,`like.${e}`),this}likeAllOf(r,e){return this.url.searchParams.append(r,`like(all).{${e.join(",")}}`),this}likeAnyOf(r,e){return this.url.searchParams.append(r,`like(any).{${e.join(",")}}`),this}ilike(r,e){return this.url.searchParams.append(r,`ilike.${e}`),this}ilikeAllOf(r,e){return this.url.searchParams.append(r,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(r,e){return this.url.searchParams.append(r,`ilike(any).{${e.join(",")}}`),this}is(r,e){return this.url.searchParams.append(r,`is.${e}`),this}in(r,e){const a=e.map(r=>"string"==typeof r&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(r,`in.(${a})`),this}contains(r,e){return"string"==typeof e?this.url.searchParams.append(r,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cs.{${e.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(e)}`),this}containedBy(r,e){return"string"==typeof e?this.url.searchParams.append(r,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cd.{${e.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(e)}`),this}rangeGt(r,e){return this.url.searchParams.append(r,`sr.${e}`),this}rangeGte(r,e){return this.url.searchParams.append(r,`nxl.${e}`),this}rangeLt(r,e){return this.url.searchParams.append(r,`sl.${e}`),this}rangeLte(r,e){return this.url.searchParams.append(r,`nxr.${e}`),this}rangeAdjacent(r,e){return this.url.searchParams.append(r,`adj.${e}`),this}overlaps(r,e){return"string"==typeof e?this.url.searchParams.append(r,`ov.${e}`):this.url.searchParams.append(r,`ov.{${e.join(",")}}`),this}textSearch(r,e,{config:a,type:s}={}){let t="";"plain"===s?t="pl":"phrase"===s?t="ph":"websearch"===s&&(t="w");const i=void 0===a?"":`(${a})`;return this.url.searchParams.append(r,`${t}fts${i}.${e}`),this}match(r){return Object.entries(r).forEach(([r,e])=>{this.url.searchParams.append(r,`eq.${e}`)}),this}not(r,e,a){return this.url.searchParams.append(r,`not.${e}.${a}`),this}or(r,{foreignTable:e}={}){const a=e?`${e}.or`:"or";return this.url.searchParams.append(a,`(${r})`),this}filter(r,e,a){return this.url.searchParams.append(r,`${e}.${a}`),this}}exports.default=a;
},{"./PostgrestTransformBuilder":"fdtS"}],"DFNl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=s(require("./PostgrestFilterBuilder"));function s(e){return e&&e.__esModule?e:{default:e}}class t{constructor(e,{headers:s={},schema:t,fetch:r}){this.url=e,this.headers=s,this.schema=t,this.fetch=r}select(s,{head:t=!1,count:r}={}){const h=t?"HEAD":"GET";let a=!1;const i=(null!=s?s:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",i),r&&(this.headers.Prefer=`count=${r}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(s,{count:t,defaultToNull:r=!0}={}){const h=[];if(this.headers.Prefer&&h.push(this.headers.Prefer),t&&h.push(`count=${t}`),r||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(s)){const e=s.reduce((e,s)=>e.concat(Object.keys(s)),[]);if(e.length>0){const s=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",s.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(s,{onConflict:t,ignoreDuplicates:r=!1,count:h,defaultToNull:a=!0}={}){const i=[`resolution=${r?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&i.push(this.headers.Prefer),h&&i.push(`count=${h}`),a||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(s)){const e=s.reduce((e,s)=>e.concat(Object.keys(s)),[]);if(e.length>0){const s=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",s.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}update(s,{count:t}={}){const r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new e.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:s}={}){const t=[];return s&&t.push(`count=${s}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new e.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}exports.default=t;
},{"./PostgrestFilterBuilder":"LPuO"}],"od2S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.version=void 0;const e="1.7.2";exports.version="1.7.2";
},{}],"G9lM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_HEADERS=void 0;var e=require("./version");const r={"X-Client-Info":`postgrest-js/${e.version}`};exports.DEFAULT_HEADERS=r;
},{"./version":"od2S"}],"iieo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("./PostgrestQueryBuilder")),t=r(require("./PostgrestFilterBuilder")),s=require("./constants");function r(e){return e&&e.__esModule?e:{default:e}}class h{constructor(e,{headers:t={},schema:r,fetch:h}={}){this.url=e,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),t),this.schema=r,this.fetch=h}from(t){const s=new URL(`${this.url}/${t}`);return new e.default(s,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(e,s={},{head:r=!1,count:h}={}){let c;const a=new URL(`${this.url}/rpc/${e}`);let i;r?(c="HEAD",Object.entries(s).forEach(([e,t])=>{a.searchParams.append(e,`${t}`)})):(c="POST",i=s);const u=Object.assign({},this.headers);return h&&(u.Prefer=`count=${h}`),new t.default({method:c,url:a,headers:u,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}}exports.default=h;
},{"./PostgrestQueryBuilder":"DFNl","./PostgrestFilterBuilder":"LPuO","./constants":"G9lM"}],"aLgD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"PostgrestBuilder",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"PostgrestClient",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"PostgrestFilterBuilder",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"PostgrestQueryBuilder",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"PostgrestTransformBuilder",{enumerable:!0,get:function(){return u.default}});var e=o(require("./PostgrestClient")),r=o(require("./PostgrestQueryBuilder")),t=o(require("./PostgrestFilterBuilder")),u=o(require("./PostgrestTransformBuilder")),n=o(require("./PostgrestBuilder"));function o(e){return e&&e.__esModule?e:{default:e}}
},{"./PostgrestClient":"iieo","./PostgrestQueryBuilder":"DFNl","./PostgrestFilterBuilder":"LPuO","./PostgrestTransformBuilder":"fdtS","./PostgrestBuilder":"wVX0"}],"NPI8":[function(require,module,exports) {
var t=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};module.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}();
},{}],"VKXw":[function(require,module,exports) {
module.exports={name:"websocket",description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],author:"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",contributors:["Iñaki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],version:"1.0.34",repository:{type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},homepage:"https://github.com/theturtle32/WebSocket-Node",engines:{node:">=4.0.0"},dependencies:{bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},devDependencies:{"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},config:{verbose:!1},scripts:{test:"tape test/unit/*.js",gulp:"gulp"},main:"index",directories:{lib:"./lib"},browser:"lib/browser.js",license:"Apache-2.0"};
},{}],"CI7o":[function(require,module,exports) {
module.exports=require("../package.json").version;
},{"../package.json":"VKXw"}],"zPp5":[function(require,module,exports) {
function e(o){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(o)}var o;if("object"===("undefined"==typeof globalThis?"undefined":e(globalThis)))o=globalThis;else try{o=require("es5-ext/global")}catch(i){}finally{if(o||"undefined"==typeof window||(o=window),!o)throw new Error("Could not determine global this")}var t=o.WebSocket||o.MozWebSocket,n=require("./version");function r(e,o){return o?new t(e,o):new t(e)}t&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(e){Object.defineProperty(r,e,{get:function(){return t[e]}})}),module.exports={w3cwebsocket:t?r:null,version:n};
},{"es5-ext/global":"NPI8","./version":"CI7o"}],"JoS8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.version=void 0;const e="2.7.3";exports.version="2.7.3";
},{}],"IvvP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WS_CLOSE_NORMAL=exports.VSN=exports.TRANSPORTS=exports.SOCKET_STATES=exports.DEFAULT_TIMEOUT=exports.DEFAULT_HEADERS=exports.CONNECTION_STATE=exports.CHANNEL_STATES=exports.CHANNEL_EVENTS=void 0;var e=require("./version");const o={"X-Client-Info":`realtime-js/${e.version}`};exports.DEFAULT_HEADERS=o;const s="1.0.0";exports.VSN=s;const n=1e4;exports.DEFAULT_TIMEOUT=1e4;const r=1e3;var t,T,E,p,S;exports.WS_CLOSE_NORMAL=1e3,exports.SOCKET_STATES=t,function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(t||(exports.SOCKET_STATES=t={})),exports.CHANNEL_STATES=T,function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(T||(exports.CHANNEL_STATES=T={})),exports.CHANNEL_EVENTS=E,function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(E||(exports.CHANNEL_EVENTS=E={})),exports.TRANSPORTS=p,function(e){e.websocket="websocket"}(p||(exports.TRANSPORTS=p={})),exports.CONNECTION_STATE=S,function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(S||(exports.CONNECTION_STATE=S={}));
},{"./version":"JoS8"}],"bb91":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class t{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}exports.default=t;
},{}],"leqb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;class e{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),o=new TextDecoder;return this._decodeBroadcast(e,t,o)}_decodeBroadcast(e,t,o){const r=t.getUint8(1),c=t.getUint8(2);let s=this.HEADER_LENGTH+2;const d=o.decode(e.slice(s,s+r));s+=r;const n=o.decode(e.slice(s,s+c));return s+=c,{ref:null,topic:d,event:n,payload:JSON.parse(o.decode(e.slice(s,e.byteLength)))}}}exports.default=e;
},{}],"obbr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../lib/constants");class t{constructor(t,i,s={},h=e.DEFAULT_TIMEOUT){this.channel=t,this.event=i,this.payload=s,this.timeout=h,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,"rate limited"===this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var i;return this._hasReceived(e)&&t(null===(i=this.receivedResp)||void 0===i?void 0:i.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}exports.default=t;
},{"../lib/constants":"IvvP"}],"Zfmw":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.REALTIME_PRESENCE_LISTEN_EVENTS=void 0,exports.REALTIME_PRESENCE_LISTEN_EVENTS=e,function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(e||(exports.REALTIME_PRESENCE_LISTEN_EVENTS=e={}));class t{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==n?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},e=>{const{onJoin:n,onLeave:s,onSync:i}=this.caller;this.joinRef=this.channel._joinRef(),this.state=t.syncState(this.state,e,n,s),this.pendingDiffs.forEach(e=>{this.state=t.syncDiff(this.state,e,n,s)}),this.pendingDiffs=[],i()}),this.channel._on(s.diff,{},e=>{const{onJoin:n,onLeave:s,onSync:i}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=t.syncDiff(this.state,e,n,s),i())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const i=this.cloneDeep(e),r=this.transformState(t),c={},a={};return this.map(i,(e,t)=>{r[e]||(a[e]=t)}),this.map(r,(e,t)=>{const n=i[e];if(n){const s=t.map(e=>e.presence_ref),i=n.map(e=>e.presence_ref),r=t.filter(e=>i.indexOf(e.presence_ref)<0),o=n.filter(e=>s.indexOf(e.presence_ref)<0);r.length>0&&(c[e]=r),o.length>0&&(a[e]=o)}else c[e]=t}),this.syncDiff(i,{joins:c,leaves:a},n,s)}static syncDiff(e,t,n,s){const{joins:i,leaves:r}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=(()=>{})),s||(s=(()=>{})),this.map(i,(t,s)=>{var i;const r=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(s),r.length>0){const n=e[t].map(e=>e.presence_ref),s=r.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...s)}n(t,r,s)}),this.map(r,(t,n)=>{let i=e[t];if(!i)return;const r=n.map(e=>e.presence_ref);i=i.filter(e=>r.indexOf(e.presence_ref)<0),e[t]=i,s(t,i,n),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return t[n]="metas"in s?s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}exports.default=t;
},{}],"LRv9":[function(require,module,exports) {
"use strict";var t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.toTimestampString=exports.toNumber=exports.toJson=exports.toBoolean=exports.toArray=exports.convertColumn=exports.convertChangeData=exports.convertCell=exports.PostgresTypes=void 0,exports.PostgresTypes=t,function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"}(t||(exports.PostgresTypes=t={}));const e=(t,e,s={})=>{var n;const o=null!==(n=s.skipTypes)&&void 0!==n?n:[];return Object.keys(e).reduce((s,n)=>(s[n]=r(n,t,e,o),s),{})};exports.convertChangeData=e;const r=(t,e,r,o)=>{const a=e.find(e=>e.name===t),i=null==a?void 0:a.type,c=r[t];return i&&!o.includes(i)?s(i,c):n(c)};exports.convertColumn=r;const s=(e,r)=>{if("_"===e.charAt(0)){const t=e.slice(1,e.length);return c(r,t)}switch(e){case t.bool:return o(r);case t.float4:case t.float8:case t.int2:case t.int4:case t.int8:case t.numeric:case t.oid:return a(r);case t.json:case t.jsonb:return i(r);case t.timestamp:return p(r);case t.abstime:case t.date:case t.daterange:case t.int4range:case t.int8range:case t.money:case t.reltime:case t.text:case t.time:case t.timestamptz:case t.timetz:case t.tsrange:case t.tstzrange:default:return n(r)}};exports.convertCell=s;const n=t=>t,o=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}};exports.toBoolean=o;const a=t=>{if("string"==typeof t){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t};exports.toNumber=a;const i=t=>{if("string"==typeof t)try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t};exports.toJson=i;const c=(t,e)=>{if("string"!=typeof t)return t;const r=t.length-1,n=t[r];if("{"===t[0]&&"}"===n){let n;const a=t.slice(1,r);try{n=JSON.parse("["+a+"]")}catch(o){n=a?a.split(","):[]}return n.map(t=>s(e,t))}return t};exports.toArray=c;const p=t=>"string"==typeof t?t.replace(" ","T"):t;exports.toTimestampString=p;
},{}],"rA8g":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.REALTIME_SUBSCRIBE_STATES=exports.REALTIME_POSTGRES_CHANGES_LISTEN_EVENT=exports.REALTIME_LISTEN_TYPES=void 0;var e=require("./lib/constants"),t=c(require("./lib/push")),i=c(require("./lib/timer")),s=c(require("./RealtimePresence")),n=r(require("./lib/transformers"));function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,i=new WeakMap;return(o=function(e){return e?i:t})(e)}function r(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var i=o(t);if(i&&i.has(e))return i.get(e);var s={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if("default"!==r&&Object.prototype.hasOwnProperty.call(e,r)){var c=n?Object.getOwnPropertyDescriptor(e,r):null;c&&(c.get||c.set)?Object.defineProperty(s,r,c):s[r]=e[r]}return s.default=e,i&&i.set(e,s),s}function c(e){return e&&e.__esModule?e:{default:e}}var a,h,u,l=function(e,t,i,s){return new(i||(i=Promise))(function(n,o){function r(e){try{a(s.next(e))}catch(t){o(t)}}function c(e){try{a(s.throw(e))}catch(t){o(t)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,c)}a((s=s.apply(e,t||[])).next())})};exports.REALTIME_POSTGRES_CHANGES_LISTEN_EVENT=a,function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(a||(exports.REALTIME_POSTGRES_CHANGES_LISTEN_EVENT=a={})),exports.REALTIME_LISTEN_TYPES=h,function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes"}(h||(exports.REALTIME_LISTEN_TYPES=h={})),exports.REALTIME_SUBSCRIBE_STATES=u,function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(u||(exports.REALTIME_SUBSCRIBE_STATES=u={}));class d{constructor(n,o={config:{}},r){this.topic=n,this.params=o,this.socket=r,this.bindings={},this.state=e.CHANNEL_STATES.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},o.config),this.timeout=this.socket.timeout,this.joinPush=new t.default(this,e.CHANNEL_EVENTS.join,this.params,this.timeout),this.rejoinTimer=new i.default(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=e.CHANNEL_STATES.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=e.CHANNEL_STATES.closed,this.socket._remove(this)}),this._onError(t=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,t),this.state=e.CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=e.CHANNEL_STATES.errored,this.rejoinTimer.scheduleTimeout())}),this._on(e.CHANNEL_EVENTS.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new s.default(this)}subscribe(e,t=this.timeout){var i,s;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:n,presence:o}}=this.params;this._onError(t=>e&&e("CHANNEL_ERROR",t)),this._onClose(()=>e&&e("CLOSED"));const r={},c={broadcast:n,presence:o,postgres_changes:null!==(s=null===(i=this.bindings.postgres_changes)||void 0===i?void 0:i.map(e=>e.filter))&&void 0!==s?s:[]};this.socket.accessToken&&(r.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:c},r)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:t})=>{var i;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0!==t){const s=this.bindings.postgres_changes,n=null!==(i=null==s?void 0:s.length)&&void 0!==i?i:0,o=[];for(let i=0;i<n;i++){const n=s[i],{filter:{event:r,schema:c,table:a,filter:h}}=n,u=t&&t[i];if(!u||u.event!==r||u.schema!==c||u.table!==a||u.filter!==h)return this.unsubscribe(),void(e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));o.push(Object.assign(Object.assign({},n),{id:u.id}))}return this.bindings.postgres_changes=o,void(e&&e("SUBSCRIBED"))}e&&e("SUBSCRIBED")}).receive("error",t=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(e,t={}){return l(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(e={}){return l(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,i){return this._on(e,t,i)}send(e,t={}){return new Promise(i=>{var s,n,o;const r=this._push(e.type,e,t.timeout||this.timeout);r.rateLimited&&i("rate limited"),"broadcast"!==e.type||(null===(o=null===(n=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===n?void 0:n.broadcast)||void 0===o?void 0:o.ack)||i("ok"),r.receive("ok",()=>i("ok")),r.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(i=this.timeout){this.state=e.CHANNEL_STATES.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(e.CHANNEL_EVENTS.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const o=new t.default(this,e.CHANNEL_EVENTS.leave,{},i);o.receive("ok",()=>{s(),n("ok")}).receive("timeout",()=>{s(),n("timed out")}).receive("error",()=>{n("error")}),o.send(),this._canPush()||o.trigger("ok",{})})}_push(e,i,s=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new t.default(this,e,i,s);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,i){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(t,i,s){var n,o;const r=t.toLocaleLowerCase(),{close:c,error:a,leave:h,join:u}=e.CHANNEL_EVENTS;if(s&&[c,a,h,u].indexOf(r)>=0&&s!==this._joinRef())return;let l=this._onMessage(r,i,s);if(i&&!l)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,i,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(i=e.filter)||void 0===i?void 0:i.event)||void 0===s?void 0:s.toLocaleLowerCase())===r}).map(e=>e.callback(l,s)):null===(o=this.bindings[r])||void 0===o||o.filter(e=>{var t,s,n,o,c,a;if(["broadcast","presence","postgres_changes"].includes(r)){if("id"in e){const o=e.id,r=null===(t=e.filter)||void 0===t?void 0:t.event;return o&&(null===(s=i.ids)||void 0===s?void 0:s.includes(o))&&("*"===r||(null==r?void 0:r.toLocaleLowerCase())===(null===(n=i.data)||void 0===n?void 0:n.type.toLocaleLowerCase()))}{const t=null===(c=null===(o=null==e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===c?void 0:c.toLocaleLowerCase();return"*"===t||t===(null===(a=null==i?void 0:i.event)||void 0===a?void 0:a.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===r}).map(e=>{if("object"==typeof l&&"ids"in l){const e=l.data,{schema:t,table:i,commit_timestamp:s,type:n,errors:o}=e,r={schema:t,table:i,commit_timestamp:s,eventType:n,new:{},old:{},errors:o};l=Object.assign(Object.assign({},r),this._getPayloadRecords(e))}e.callback(l,s)})}_isClosed(){return this.state===e.CHANNEL_STATES.closed}_isJoined(){return this.state===e.CHANNEL_STATES.joined}_isJoining(){return this.state===e.CHANNEL_STATES.joining}_isLeaving(){return this.state===e.CHANNEL_STATES.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,i){const s=e.toLocaleLowerCase(),n={type:s,filter:t,callback:i};return this.bindings[s]?this.bindings[s].push(n):this.bindings[s]=[n],this}_off(e,t){const i=e.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===i&&d.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(e[i]!==t[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(e.CHANNEL_EVENTS.close,{},t)}_onError(t){this._on(e.CHANNEL_EVENTS.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=e.CHANNEL_STATES.joining,this.joinPush.resend(t))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=n.convertChangeData(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=n.convertChangeData(e.columns,e.old_record)),t}}exports.default=d;
},{"./lib/constants":"IvvP","./lib/push":"obbr","./lib/timer":"bb91","./RealtimePresence":"Zfmw","./lib/transformers":"LRv9"}],"NbQ8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("websocket"),t=require("./lib/constants"),n=r(require("./lib/timer")),s=r(require("./lib/serializer")),i=r(require("./RealtimeChannel"));function r(e){return e&&e.__esModule?e:{default:e}}var o=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function o(e){try{h(s.next(e))}catch(t){r(t)}}function a(e){try{h(s.throw(e))}catch(t){r(t)}}function h(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}h((s=s.apply(e,t||[])).next())})};const a=()=>{};class h{constructor(i,r){var h;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=t.DEFAULT_HEADERS,this.params={},this.timeout=t.DEFAULT_TIMEOUT,this.transport=e.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=a,this.conn=null,this.sendBuffer=[],this.serializer=new s.default,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${i}/${t.TRANSPORTS.websocket}`,(null==r?void 0:r.params)&&(this.params=r.params),(null==r?void 0:r.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),(null==r?void 0:r.timeout)&&(this.timeout=r.timeout),(null==r?void 0:r.logger)&&(this.logger=r.logger),(null==r?void 0:r.transport)&&(this.transport=r.transport),(null==r?void 0:r.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const c=null===(h=null==r?void 0:r.params)||void 0===h?void 0:h.eventsPerSecond;c&&(this.eventsPerSecondLimitMs=Math.floor(1e3/c)),this.reconnectAfterMs=(null==r?void 0:r.reconnectAfterMs)?r.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==r?void 0:r.encode)?r.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==r?void 0:r.decode)?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new n.default(()=>o(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=(()=>this._onConnOpen()),this.conn.onerror=(e=>this._onConnError(e)),this.conn.onmessage=(e=>this._onConnMessage(e)),this.conn.onclose=(e=>this._onConnClose(e))))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return o(this,void 0,void 0,function*(){const t=yield e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t})}removeAllChannels(){return o(this,void 0,void 0,function*(){const e=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),e})}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case t.SOCKET_STATES.connecting:return t.CONNECTION_STATE.Connecting;case t.SOCKET_STATES.open:return t.CONNECTION_STATE.Open;case t.SOCKET_STATES.closing:return t.CONNECTION_STATE.Closing;default:return t.CONNECTION_STATE.Closed}}isConnected(){return this.connectionState()===t.CONNECTION_STATE.Open}channel(e,t={config:{}}){this.isConnected()||this.connect();const n=new i.default(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:s,ref:i}=e;let r=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};if(this.log("push",`${t} ${n} (${i})`,s),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(n)){if(this._throttle(r)())return"rate limited"}else r();else this.sendBuffer.push(r)}setAuth(e){this.accessToken=e,this.channels.forEach(n=>{e&&n.updateJoinPayload({access_token:e}),n.joinedOnce&&n._isJoined()&&n._push(t.CHANNEL_EVENTS.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:t.VSN}))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:n,payload:s,ref:i}=e;(i&&i===this.pendingHeartbeatRef||n===(null==s?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${t} ${n} ${i&&"("+i+")"||""}`,s),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,s,i)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(t.CHANNEL_EVENTS.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(t.WS_CLOSE_NORMAL,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>!!this.inThrottle||(e(),t>0&&(this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},t)),!1)}}exports.default=h;
},{"websocket":"zPp5","./lib/constants":"IvvP","./lib/timer":"bb91","./lib/serializer":"leqb","./RealtimeChannel":"rA8g"}],"DDXl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"REALTIME_LISTEN_TYPES",{enumerable:!0,get:function(){return t.REALTIME_LISTEN_TYPES}}),Object.defineProperty(exports,"REALTIME_POSTGRES_CHANGES_LISTEN_EVENT",{enumerable:!0,get:function(){return t.REALTIME_POSTGRES_CHANGES_LISTEN_EVENT}}),Object.defineProperty(exports,"REALTIME_PRESENCE_LISTEN_EVENTS",{enumerable:!0,get:function(){return r.REALTIME_PRESENCE_LISTEN_EVENTS}}),Object.defineProperty(exports,"REALTIME_SUBSCRIBE_STATES",{enumerable:!0,get:function(){return t.REALTIME_SUBSCRIBE_STATES}}),Object.defineProperty(exports,"RealtimeChannel",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"RealtimeClient",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"RealtimePresence",{enumerable:!0,get:function(){return r.default}});var e=o(require("./RealtimeClient")),t=u(require("./RealtimeChannel")),r=u(require("./RealtimePresence"));function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}function u(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var u={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in e)if("default"!==E&&Object.prototype.hasOwnProperty.call(e,E)){var i=o?Object.getOwnPropertyDescriptor(e,E):null;i&&(i.get||i.set)?Object.defineProperty(u,E,i):u[E]=e[E]}return u.default=e,r&&r.set(e,u),u}function o(e){return e&&e.__esModule?e:{default:e}}
},{"./RealtimeClient":"NbQ8","./RealtimeChannel":"rA8g","./RealtimePresence":"Zfmw"}],"cgHk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StorageUnknownError=exports.StorageError=exports.StorageApiError=void 0,exports.isStorageError=t;class r extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function t(r){return"object"==typeof r&&null!==r&&"__isStorageError"in r}exports.StorageError=r;class o extends r{constructor(r,t){super(r),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}exports.StorageApiError=o;class e extends r{constructor(r,t){super(r),this.name="StorageUnknownError",this.originalError=t}}exports.StorageUnknownError=e;
},{}],"Bjdf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveResponse=exports.resolveFetch=void 0;var e=function(e,o,n,t){return new(n||(n=Promise))(function(r,s){function i(e){try{u(t.next(e))}catch(o){s(o)}}function c(e){try{u(t.throw(e))}catch(o){s(o)}}function u(e){var o;e.done?r(e.value):(o=e.value,o instanceof n?o:new n(function(e){e(o)})).then(i,c)}u((t=t.apply(e,o||[])).next())})};const o=o=>{let n;return n=o||("undefined"==typeof fetch?(...o)=>e(void 0,void 0,void 0,function*(){return yield(yield require("_bundle_loader")(require.resolve("cross-fetch"))).fetch(...o)}):fetch),(...e)=>n(...e)};exports.resolveFetch=o;const n=()=>e(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield require("_bundle_loader")(require.resolve("cross-fetch"))).Response:Response});exports.resolveResponse=n;
},{"_bundle_loader":"ZOfP","cross-fetch":[["browser-ponyfill.79a645bd.js","vTPr"],"browser-ponyfill.79a645bd.js.map","vTPr"]}],"ZehH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.get=u,exports.post=c,exports.put=d,exports.remove=a;var n=require("./errors"),e=require("./helpers"),t=function(n,e,t,o){return new(t||(t=Promise))(function(r,i){function s(n){try{c(o.next(n))}catch(e){i(e)}}function u(n){try{c(o.throw(n))}catch(e){i(e)}}function c(n){var e;n.done?r(n.value):(e=n.value,e instanceof t?e:new t(function(n){n(e)})).then(s,u)}c((o=o.apply(n,e||[])).next())})};const o=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),r=(r,i)=>t(void 0,void 0,void 0,function*(){const t=yield(0,e.resolveResponse)();r instanceof t?r.json().then(e=>{i(new n.StorageApiError(o(e),r.status||500))}).catch(e=>{i(new n.StorageUnknownError(o(e),e))}):i(new n.StorageUnknownError(o(r),r))}),i=(n,e,t,o)=>{const r={method:n,headers:(null==e?void 0:e.headers)||{}};return"GET"===n?r:(r.headers=Object.assign({"Content-Type":"application/json"},null==e?void 0:e.headers),r.body=JSON.stringify(o),Object.assign(Object.assign({},r),t))};function s(n,e,o,s,u,c){return t(this,void 0,void 0,function*(){return new Promise((t,d)=>{n(o,i(e,s,u,c)).then(n=>{if(!n.ok)throw n;return(null==s?void 0:s.noResolveJson)?n:n.json()}).then(n=>t(n)).catch(n=>r(n,d))})})}function u(n,e,o,r){return t(this,void 0,void 0,function*(){return s(n,"GET",e,o,r)})}function c(n,e,o,r,i){return t(this,void 0,void 0,function*(){return s(n,"POST",e,r,i,o)})}function d(n,e,o,r,i){return t(this,void 0,void 0,function*(){return s(n,"PUT",e,r,i,o)})}function a(n,e,o,r,i){return t(this,void 0,void 0,function*(){return s(n,"DELETE",e,r,i,o)})}
},{"./errors":"cgHk","./helpers":"Bjdf"}],"xig4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=require("../lib/errors"),e=require("../lib/fetch"),r=require("../lib/helpers"),o=function(t,e,r,o){return new(r||(r=Promise))(function(n,i){function a(t){try{d(o.next(t))}catch(e){i(e)}}function s(t){try{d(o.throw(t))}catch(e){i(e)}}function d(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}d((o=o.apply(t,e||[])).next())})};const n={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},i={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class a{constructor(t,e={},o,n){this.url=t,this.headers=e,this.bucketId=o,this.fetch=(0,r.resolveFetch)(n)}uploadOrUpdate(e,r,n,a){return o(this,void 0,void 0,function*(){try{let s;const d=Object.assign(Object.assign({},i),a),l=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(d.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?((s=new FormData).append("cacheControl",d.cacheControl),s.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(s=n).append("cacheControl",d.cacheControl):(s=n,l["cache-control"]=`max-age=${d.cacheControl}`,l["content-type"]=d.contentType);const h=this._removeEmptyFolders(r),u=this._getFinalPath(h),c=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:l},(null==d?void 0:d.duplex)?{duplex:d.duplex}:{}));if(c.ok)return{data:{path:h},error:null};return{data:null,error:yield c.json()}}catch(o){if((0,t.isStorageError)(o))return{data:null,error:o};throw o}})}upload(t,e,r){return o(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,r)})}uploadToSignedUrl(e,r,n,a){return o(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),s=this._getFinalPath(o),d=new URL(this.url+`/object/upload/sign/${s}`);d.searchParams.set("token",r);try{let e;const r=Object.assign({upsert:i.upsert},a),s=Object.assign(Object.assign({},this.headers),{"x-upsert":String(r.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?((e=new FormData).append("cacheControl",r.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n).append("cacheControl",r.cacheControl):(e=n,s["cache-control"]=`max-age=${r.cacheControl}`,s["content-type"]=r.contentType);const h=yield this.fetch(d.toString(),{method:"PUT",body:e,headers:s});if(h.ok)return{data:{path:o},error:null};return{data:null,error:yield h.json()}}catch(l){if((0,t.isStorageError)(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(r){return o(this,void 0,void 0,function*(){try{let n=this._getFinalPath(r);const i=yield(0,e.post)(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:this.headers}),a=new URL(this.url+i.url),s=a.searchParams.get("token");if(!s)throw new t.StorageError("No token returned by API");return{data:{signedUrl:a.toString(),path:r,token:s},error:null}}catch(o){if((0,t.isStorageError)(o))return{data:null,error:o};throw o}})}update(t,e,r){return o(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,r)})}move(r,n){return o(this,void 0,void 0,function*(){try{return{data:yield(0,e.post)(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n},{headers:this.headers}),error:null}}catch(o){if((0,t.isStorageError)(o))return{data:null,error:o};throw o}})}copy(r,n){return o(this,void 0,void 0,function*(){try{return{data:{path:(yield(0,e.post)(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n},{headers:this.headers})).Key},error:null}}catch(o){if((0,t.isStorageError)(o))return{data:null,error:o};throw o}})}createSignedUrl(r,n,i){return o(this,void 0,void 0,function*(){try{let a=this._getFinalPath(r),s=yield(0,e.post)(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},(null==i?void 0:i.transform)?{transform:i.transform}:{}),{headers:this.headers});const d=(null==i?void 0:i.download)?`&download=${!0===i.download?"":i.download}`:"";return{data:s={signedUrl:encodeURI(`${this.url}${s.signedURL}${d}`)},error:null}}catch(o){if((0,t.isStorageError)(o))return{data:null,error:o};throw o}})}createSignedUrls(r,n,i){return o(this,void 0,void 0,function*(){try{const a=yield(0,e.post)(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:r},{headers:this.headers}),s=(null==i?void 0:i.download)?`&download=${!0===i.download?"":i.download}`:"";return{data:a.map(t=>Object.assign(Object.assign({},t),{signedUrl:t.signedURL?encodeURI(`${this.url}${t.signedURL}${s}`):null})),error:null}}catch(o){if((0,t.isStorageError)(o))return{data:null,error:o};throw o}})}download(r,n){return o(this,void 0,void 0,function*(){const o=void 0!==(null==n?void 0:n.transform)?"render/image/authenticated":"object",i=this.transformOptsToQueryString((null==n?void 0:n.transform)||{}),a=i?`?${i}`:"";try{const n=this._getFinalPath(r),i=yield(0,e.get)(this.fetch,`${this.url}/${o}/${n}${a}`,{headers:this.headers,noResolveJson:!0});return{data:yield i.blob(),error:null}}catch(s){if((0,t.isStorageError)(s))return{data:null,error:s};throw s}})}getPublicUrl(t,e){const r=this._getFinalPath(t),o=[],n=(null==e?void 0:e.download)?`download=${!0===e.download?"":e.download}`:"";""!==n&&o.push(n);const i=void 0!==(null==e?void 0:e.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==e?void 0:e.transform)||{});""!==a&&o.push(a);let s=o.join("&");return""!==s&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${s}`)}}}remove(r){return o(this,void 0,void 0,function*(){try{return{data:yield(0,e.remove)(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(o){if((0,t.isStorageError)(o))return{data:null,error:o};throw o}})}list(r,i,a){return o(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},n),i),{prefix:r||""});return{data:yield(0,e.post)(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},a),error:null}}catch(o){if((0,t.isStorageError)(o))return{data:null,error:o};throw o}})}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}}exports.default=a;
},{"../lib/errors":"cgHk","../lib/fetch":"ZehH","../lib/helpers":"Bjdf"}],"Y73Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.version=void 0;const e="2.5.1";exports.version="2.5.1";
},{}],"QLW7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_HEADERS=void 0;var e=require("./version");const r={"X-Client-Info":`storage-js/${e.version}`};exports.DEFAULT_HEADERS=r;
},{"./version":"Y73Z"}],"FZZb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("../lib/constants"),r=require("../lib/errors"),t=require("../lib/fetch"),i=require("../lib/helpers"),u=function(e,r,t,i){return new(t||(t=Promise))(function(u,o){function s(e){try{l(i.next(e))}catch(r){o(r)}}function a(e){try{l(i.throw(e))}catch(r){o(r)}}function l(e){var r;e.done?u(e.value):(r=e.value,r instanceof t?r:new t(function(e){e(r)})).then(s,a)}l((i=i.apply(e,r||[])).next())})};class o{constructor(r,t={},u){this.url=r,this.headers=Object.assign(Object.assign({},e.DEFAULT_HEADERS),t),this.fetch=(0,i.resolveFetch)(u)}listBuckets(){return u(this,void 0,void 0,function*(){try{return{data:yield(0,t.get)(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if((0,r.isStorageError)(e))return{data:null,error:e};throw e}})}getBucket(e){return u(this,void 0,void 0,function*(){try{return{data:yield(0,t.get)(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(i){if((0,r.isStorageError)(i))return{data:null,error:i};throw i}})}createBucket(e,i={public:!1}){return u(this,void 0,void 0,function*(){try{return{data:yield(0,t.post)(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(u){if((0,r.isStorageError)(u))return{data:null,error:u};throw u}})}updateBucket(e,i){return u(this,void 0,void 0,function*(){try{return{data:yield(0,t.put)(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(u){if((0,r.isStorageError)(u))return{data:null,error:u};throw u}})}emptyBucket(e){return u(this,void 0,void 0,function*(){try{return{data:yield(0,t.post)(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(i){if((0,r.isStorageError)(i))return{data:null,error:i};throw i}})}deleteBucket(e){return u(this,void 0,void 0,function*(){try{return{data:yield(0,t.remove)(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(i){if((0,r.isStorageError)(i))return{data:null,error:i};throw i}})}}exports.default=o;
},{"../lib/constants":"QLW7","../lib/errors":"cgHk","../lib/fetch":"ZehH","../lib/helpers":"Bjdf"}],"x3Vi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StorageClient=void 0;var e=r(require("./packages/StorageFileApi")),t=r(require("./packages/StorageBucketApi"));function r(e){return e&&e.__esModule?e:{default:e}}class s extends t.default{constructor(e,t={},r){super(e,t,r)}from(t){return new e.default(this.url,this.headers,t,this.fetch)}}exports.StorageClient=s;
},{"./packages/StorageFileApi":"xig4","./packages/StorageBucketApi":"FZZb"}],"kHZ4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
},{}],"ToC9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={StorageClient:!0};Object.defineProperty(exports,"StorageClient",{enumerable:!0,get:function(){return r.StorageClient}});var r=require("./StorageClient"),t=require("./lib/types");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var o=require("./lib/errors");Object.keys(o).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===o[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return o[r]}}))});
},{"./StorageClient":"x3Vi","./lib/types":"kHZ4","./lib/errors":"cgHk"}],"QZrB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.version=void 0;const e="2.31.0";exports.version=e;
},{}],"ulZb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DEFAULT_HEADERS=void 0;var e=require("./version");const s={"X-Client-Info":`supabase-js/${e.version}`};exports.DEFAULT_HEADERS=s;
},{"./version":"QZrB"}],"MXCq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveHeadersConstructor=exports.resolveFetch=exports.fetchWithAuth=void 0;var e=r(require("cross-fetch"));function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}function r(e,r){if(!r&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var o={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var u in e)if("default"!==u&&Object.prototype.hasOwnProperty.call(e,u)){var i=s?Object.getOwnPropertyDescriptor(e,u):null;i&&(i.get||i.set)?Object.defineProperty(o,u,i):o[u]=e[u]}return o.default=e,n&&n.set(e,o),o}var n=function(e,t,r,n){return new(r||(r=Promise))(function(o,s){function u(e){try{a(n.next(e))}catch(t){s(t)}}function i(e){try{a(n.throw(e))}catch(t){s(t)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(u,i)}a((n=n.apply(e,t||[])).next())})};const o=t=>{let r;return r=t||("undefined"==typeof fetch?e.default:fetch),(...e)=>r(...e)};exports.resolveFetch=o;const s=()=>"undefined"==typeof Headers?e.Headers:Headers;exports.resolveHeadersConstructor=s;const u=(e,t,r)=>{const u=o(r),i=s();return(r,o)=>n(void 0,void 0,void 0,function*(){var n;const s=null!==(n=yield t())&&void 0!==n?n:e;let a=new i(null==o?void 0:o.headers);return a.has("apikey")||a.set("apikey",e),a.has("Authorization")||a.set("Authorization",`Bearer ${s}`),u(r,Object.assign(Object.assign({},o),{headers:a}))})};exports.fetchWithAuth=u;
},{"cross-fetch":"vTPr"}],"mjti":[function(require,module,exports) {
"use strict";function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})}function t(e){return e.replace(/\/$/,"")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.applySettingDefaults=s,exports.isBrowser=void 0,exports.stripTrailingSlash=t,exports.uuid=e;const x=()=>"undefined"!=typeof window;function s(e,t){const{db:x,auth:s,realtime:r,global:n}=e,{db:i,auth:a,realtime:o,global:c}=t;return{db:Object.assign(Object.assign({},i),x),auth:Object.assign(Object.assign({},a),s),realtime:Object.assign(Object.assign({},o),r),global:Object.assign(Object.assign({},c),n)}}exports.isBrowser=x;
},{}],"aK8w":[function(require,module,exports) {
"use strict";function t(t){return Math.round(Date.now()/1e3)+t}function e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Deferred=void 0,exports.decodeBase64URL=p,exports.decodeJWTPayload=f,exports.expiresAt=t,exports.generatePKCEChallenge=v,exports.generatePKCEVerifier=m,exports.isBrowser=exports.getItemAsync=void 0,exports.isInStackGuard=E,exports.looksLikeFetchResponse=void 0,exports.parseParametersFromURL=s,exports.resolveFetch=exports.removeItemAsync=void 0,exports.retryable=h,exports.setItemAsync=void 0,exports.sleep=x,exports.stackGuard=I,exports.stackGuardsSupported=P,exports.supportsLocalStorage=void 0,exports.uuid=e;const r=()=>"undefined"!=typeof document;exports.isBrowser=r;const o={tested:!1,writable:!1},n=()=>{if(!r())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(o.tested)return o.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),o.tested=!0,o.writable=!0}catch(e){o.tested=!0,o.writable=!1}return o.writable};function s(t){const e={},r=new URL(t);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((t,r)=>{e[r]=t})}catch(o){}return r.searchParams.forEach((t,r)=>{e[r]=t}),e}exports.supportsLocalStorage=n;const a=t=>{let e;return e=t||("undefined"==typeof fetch?async(...t)=>await(await require("_bundle_loader")(require.resolve("cross-fetch"))).fetch(...t):fetch),(...t)=>e(...t)};exports.resolveFetch=a;const i=t=>"object"==typeof t&&null!==t&&"status"in t&&"ok"in t&&"json"in t&&"function"==typeof t.json;exports.looksLikeFetchResponse=i;const c=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))};exports.setItemAsync=c;const u=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch(o){return r}};exports.getItemAsync=u;const l=async(t,e)=>{await t.removeItem(e)};function p(t){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r,o,n,s,a,i,c,u="",l=0;for(t=t.replace("-","+").replace("_","/");l<t.length;)r=(s=e.indexOf(t.charAt(l++)))<<2|(a=e.indexOf(t.charAt(l++)))>>4,o=(15&a)<<4|(i=e.indexOf(t.charAt(l++)))>>2,n=(3&i)<<6|(c=e.indexOf(t.charAt(l++))),u+=String.fromCharCode(r),64!=i&&0!=o&&(u+=String.fromCharCode(o)),64!=c&&0!=n&&(u+=String.fromCharCode(n));return u}exports.removeItemAsync=l;class d{constructor(){this.promise=new d.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}}function f(t){const e=t.split(".");if(3!==e.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(e[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=e[1];return JSON.parse(p(r))}async function x(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function h(t,e){return new Promise((r,o)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await t(s);if(!e(s,null,a))return void r(a)}catch(n){if(!e(s,n))return void o(n)}})()})}function y(t){return("0"+t.toString(16)).substr(-2)}function m(){const t=new Uint32Array(56);if("undefined"==typeof crypto){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",e=t.length;let r="";for(let o=0;o<56;o++)r+=t.charAt(Math.floor(Math.random()*e));return r}return crypto.getRandomValues(t),Array.from(t,y).join("")}async function w(t){const e=(new TextEncoder).encode(t),r=await crypto.subtle.digest("SHA-256",e),o=new Uint8Array(r);return Array.from(o).map(t=>String.fromCharCode(t)).join("")}function g(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function v(t){if("undefined"==typeof crypto)return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;return g(await w(t))}exports.Deferred=d,d.promiseConstructor=Promise;const _="__stack_guard__",b="__",S=/__stack_guard__([a-zA-Z0-9_-]+)__/;let A,C=!1,k=!1;function E(t){var e,r;let o;A();try{throw new Error}catch(s){o=s}const n=null!==(r=null===(e=o.stack)||void 0===e?void 0:e.split("\n"))&&void 0!==r?r:[];for(let a=0;a<n.length;a+=1){const e=n[a].match(S);if(e&&e[1]===t)return!0}return!1}async function I(t,e){await A();const r=`${_}${t}${b}`,o={[r]:async()=>await e()};return Object.assign(o[r],{displayName:r}),await o[r]()}async function P(){return C?k:(await A(),k)}let j=!1;A=(async()=>{C||(C=!0,await I("ENV_CHECK",async()=>{await x(0);const t=E("ENV_CHECK");return k=t,t||j||(j=!0,console.warn("@supabase/gotrue-js: Stack guards not supported in this environment. Generally not an issue but may point to a very conservative transpilation environment (use ES2017 or above) that implements async/await with generators, or this is a JavaScript engine that does not support async/await stack traces. Safari is known to not support stack guards.")),t}))});
},{"_bundle_loader":"ZOfP","cross-fetch":[["browser-ponyfill.79a645bd.js","vTPr"],"browser-ponyfill.79a645bd.js.map","vTPr"]}],"fEKz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CustomAuthError=exports.AuthUnknownError=exports.AuthSessionMissingError=exports.AuthRetryableFetchError=exports.AuthPKCEGrantCodeExchangeError=exports.AuthInvalidTokenResponseError=exports.AuthInvalidCredentialsError=exports.AuthImplicitGrantRedirectError=exports.AuthError=exports.AuthApiError=void 0,exports.isAuthApiError=e,exports.isAuthError=t,exports.isAuthRetryableFetchError=p;class r extends Error{constructor(r,t){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function t(r){return"object"==typeof r&&null!==r&&"__isAuthError"in r}exports.AuthError=r;class s extends r{constructor(r,t){super(r,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function e(r){return t(r)&&"AuthApiError"===r.name}exports.AuthApiError=s;class o extends r{constructor(r,t){super(r),this.name="AuthUnknownError",this.originalError=t}}exports.AuthUnknownError=o;class n extends r{constructor(r,t,s){super(r),this.name=t,this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}exports.CustomAuthError=n;class u extends n{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}exports.AuthSessionMissingError=u;class i extends n{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500)}}exports.AuthInvalidTokenResponseError=i;class a extends n{constructor(r){super(r,"AuthInvalidCredentialsError",400)}}exports.AuthInvalidCredentialsError=a;class h extends n{constructor(r,t=null){super(r,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}exports.AuthImplicitGrantRedirectError=h;class c extends n{constructor(r,t=null){super(r,"AuthPKCEGrantCodeExchangeError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}exports.AuthPKCEGrantCodeExchangeError=c;class l extends n{constructor(r,t){super(r,"AuthRetryableFetchError",t)}}function p(r){return t(r)&&"AuthRetryableFetchError"===r.name}exports.AuthRetryableFetchError=l;
},{}],"qz1X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports._generateLinkResponse=p,exports._noResolveJsonResponse=h,exports._request=a,exports._sessionResponse=c,exports._ssoResponse=d,exports._userResponse=u;var e=require("./helpers"),r=require("./errors"),t=function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]])}return t};const n=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),o=[502,503,504];async function s(t){if(!(0,e.looksLikeFetchResponse)(t))throw new r.AuthRetryableFetchError(n(t),0);if(o.includes(t.status))throw new r.AuthRetryableFetchError(n(t),t.status);let s;try{s=await t.json()}catch(i){throw new r.AuthUnknownError(n(i),i)}throw new r.AuthApiError(n(s),t.status||500)}const i=(e,r,t,n)=>{const o={method:e,headers:(null==r?void 0:r.headers)||{}};return"GET"===e?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==r?void 0:r.headers),o.body=JSON.stringify(n),Object.assign(Object.assign({},o),t))};async function a(e,r,t,n){var o;const s=Object.assign({},null==n?void 0:n.headers);(null==n?void 0:n.jwt)&&(s.Authorization=`Bearer ${n.jwt}`);const i=null!==(o=null==n?void 0:n.query)&&void 0!==o?o:{};(null==n?void 0:n.redirectTo)&&(i.redirect_to=n.redirectTo);const a=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await l(e,r,t+a,{headers:s,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function l(e,t,o,a,l,c){const u=i(t,a,l,c);let d;try{d=await e(o,u)}catch(p){throw console.error(p),new r.AuthRetryableFetchError(n(p),0)}if(d.ok||await s(d),null==a?void 0:a.noResolveJson)return d;try{return await d.json()}catch(p){await s(p)}}function c(r){var t;let n=null;return _(r)&&((n=Object.assign({},r)).expires_at=(0,e.expiresAt)(r.expires_in)),{data:{session:n,user:null!==(t=r.user)&&void 0!==t?t:r},error:null}}function u(e){var r;return{data:{user:null!==(r=e.user)&&void 0!==r?r:e},error:null}}function d(e){return{data:e,error:null}}function p(e){const{action_link:r,email_otp:n,hashed_token:o,redirect_to:s,verification_type:i}=e,a=t(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:r,email_otp:n,hashed_token:o,redirect_to:s,verification_type:i},user:Object.assign({},a)},error:null}}function h(e){return e}function _(e){return e.access_token&&e.refresh_token&&e.expires_in}
},{"./helpers":"aK8w","./errors":"fEKz"}],"r5yK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var r=require("./lib/fetch"),e=require("./lib/helpers"),t=require("./lib/errors"),s=function(r,e){var t={};for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&e.indexOf(s)<0&&(t[s]=r[s]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(r);a<s.length;a++)e.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(r,s[a])&&(t[s[a]]=r[s[a]])}return t};class a{constructor({url:r="",headers:t={},fetch:s}){this.url=r,this.headers=t,this.fetch=(0,e.resolveFetch)(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s="global"){try{return await(0,r._request)(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(a){if((0,t.isAuthError)(a))return{data:null,error:a};throw a}}async inviteUserByEmail(e,s={}){try{return await(0,r._request)(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:r._userResponse})}catch(a){if((0,t.isAuthError)(a))return{data:{user:null},error:a};throw a}}async generateLink(e){try{const{options:i}=e,o=s(e,["options"]),n=Object.assign(Object.assign({},o),i);return"newEmail"in o&&(n.new_email=null==o?void 0:o.newEmail,delete n.newEmail),await(0,r._request)(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:r._generateLinkResponse,redirectTo:null==i?void 0:i.redirectTo})}catch(a){if((0,t.isAuthError)(a))return{data:{properties:null,user:null},error:a};throw a}}async createUser(e){try{return await(0,r._request)(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:r._userResponse})}catch(s){if((0,t.isAuthError)(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,a,i,o,n,l,u;try{const d={nextPage:null,lastPage:0,total:0},c=await(0,r._request)(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(a=null===(s=null==e?void 0:e.page)||void 0===s?void 0:s.toString())&&void 0!==a?a:"",per_page:null!==(o=null===(i=null==e?void 0:e.perPage)||void 0===i?void 0:i.toString())&&void 0!==o?o:""},xform:r._noResolveJsonResponse});if(c.error)throw c.error;const f=await c.json(),p=null!==(n=c.headers.get("x-total-count"))&&void 0!==n?n:0,y=null!==(u=null===(l=c.headers.get("link"))||void 0===l?void 0:l.split(","))&&void 0!==u?u:[];return y.length>0&&(y.forEach(r=>{const e=parseInt(r.split(";")[0].split("=")[1].substring(0,1)),t=JSON.parse(r.split(";")[1].split("=")[1]);d[`${t}Page`]=e}),d.total=parseInt(p)),{data:Object.assign(Object.assign({},f),d),error:null}}catch(h){if((0,t.isAuthError)(h))return{data:{users:[]},error:h};throw h}}async getUserById(e){try{return await(0,r._request)(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:r._userResponse})}catch(s){if((0,t.isAuthError)(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){try{return await(0,r._request)(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:r._userResponse})}catch(a){if((0,t.isAuthError)(a))return{data:{user:null},error:a};throw a}}async deleteUser(e,s=!1){try{return await(0,r._request)(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:r._userResponse})}catch(a){if((0,t.isAuthError)(a))return{data:{user:null},error:a};throw a}}async _listFactors(e){try{const{data:a,error:i}=await(0,r._request)(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:a,error:i}}catch(s){if((0,t.isAuthError)(s))return{data:null,error:s};throw s}}async _deleteFactor(e){try{return{data:await(0,r._request)(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if((0,t.isAuthError)(s))return{data:null,error:s};throw s}}}exports.default=a;
},{"./lib/fetch":"qz1X","./lib/helpers":"aK8w","./lib/errors":"fEKz"}],"yMJF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.version=void 0;const e="2.46.1";exports.version=e;
},{}],"FCUC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.STORAGE_KEY=exports.NETWORK_FAILURE=exports.GOTRUE_URL=exports.EXPIRY_MARGIN=exports.DEFAULT_HEADERS=exports.AUDIENCE=void 0;var t=require("./version");const e="http://localhost:9999";exports.GOTRUE_URL=e;const o="supabase.auth.token";exports.STORAGE_KEY=o;const s="";exports.AUDIENCE="";const E={"X-Client-Info":`gotrue-js/${t.version}`};exports.DEFAULT_HEADERS=E;const r=10;exports.EXPIRY_MARGIN=10;const R={MAX_RETRIES:10,RETRY_INTERVAL:2};exports.NETWORK_FAILURE=R;
},{"./version":"yMJF"}],"nFV6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./helpers");const t={getItem:t=>(0,e.supportsLocalStorage)()?globalThis.localStorage.getItem(t):null,setItem:(t,o)=>{(0,e.supportsLocalStorage)()&&globalThis.localStorage.setItem(t,o)},removeItem:t=>{(0,e.supportsLocalStorage)()&&globalThis.localStorage.removeItem(t)}};var o=t;exports.default=o;
},{"./helpers":"aK8w"}],"tYyX":[function(require,module,exports) {
"use strict";function e(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.polyfillGlobalThis=e;
},{}],"jaRo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=l(require("./GoTrueAdminApi")),s=require("./lib/constants"),r=require("./lib/errors"),t=require("./lib/fetch"),i=require("./lib/helpers"),o=l(require("./lib/local-storage")),n=require("./lib/polyfills"),a=require("./lib/version");function l(e){return e&&e.__esModule?e:{default:e}}(0,n.polyfillGlobalThis)();const h={url:s.GOTRUE_URL,storageKey:s.STORAGE_KEY,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:s.DEFAULT_HEADERS,flowType:"implicit",debug:!1},c=3e4,u=3;async function d(e,s,r){return await r()}class _{constructor(s){var r;this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null,this.instanceID=_.nextInstanceID,_.nextInstanceID+=1,this.instanceID>0&&(0,i.isBrowser)()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const t=Object.assign(Object.assign({},h),s);if(this.logDebugMessages=t.debug,this.inMemorySession=null,this.storageKey=t.storageKey,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.storage=t.storage||o.default,this.admin=new e.default({url:t.url,headers:t.headers,fetch:t.fetch}),this.url=t.url,this.headers=t.headers,this.fetch=(0,i.resolveFetch)(t.fetch),this.lock=t.lock||d,this.detectSessionInUrl=t.detectSessionInUrl,this.flowType=t.flowType,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession&&this.storage===o.default&&!(0,i.supportsLocalStorage)()&&console.warn("No storage option exists to persist the session, which may result in unexpected behavior when using auth.\n        If you want to set persistSession to true, please provide a storage option or you may set persistSession to false to disable this warning."),(0,i.isBrowser)()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",n)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&console.log(`GoTrueClient@${this.instanceID} (${a.version}) ${(new Date).toISOString()}`,...e),this}initialize(){return this.initializePromise?this.initializePromise:this._initialize()}async _initialize(){if(this.initializePromise)throw new Error("Double call of #_initialize()");return this.initializePromise=this._acquireLock(-1,async()=>await(0,i.stackGuard)("_initialize",async()=>{try{const s=!!(0,i.isBrowser)()&&await this._isPKCEFlow();if(this._debug("#_initialize()","begin","is PKCE flow",s),s||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:e,error:r}=await this._getSessionFromURL(s);if(r)return this._debug("#_initialize()","error detecting session from URL",r),await this._removeSession(),{error:r};const{session:t,redirectType:i}=e;return this._debug("#_initialize()","detected session in URL",t,"redirect type",i),await this._saveSession(t),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",t):await this._notifyAllSubscribers("SIGNED_IN",t)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return(0,r.isAuthError)(e)?{error:e}:{error:new r.AuthUnknownError("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}})),await this.initializePromise}async signUp(e){var s,o,n;try{let l;if(await this._removeSession(),"email"in e){const{email:r,password:o,options:n}=e;let a=null,h=null;if("pkce"===this.flowType){const e=(0,i.generatePKCEVerifier)();await(0,i.setItemAsync)(this.storage,`${this.storageKey}-code-verifier`,e),h=e===(a=await(0,i.generatePKCEChallenge)(e))?"plain":"s256"}l=await(0,t._request)(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:{email:r,password:o,data:null!==(s=null==n?void 0:n.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:a,code_challenge_method:h},xform:t._sessionResponse})}else{if(!("phone"in e))throw new r.AuthInvalidCredentialsError("You must provide either an email or phone number and a password");{const{phone:s,password:r,options:i}=e;l=await(0,t._request)(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:s,password:r,data:null!==(o=null==i?void 0:i.data)&&void 0!==o?o:{},channel:null!==(n=null==i?void 0:i.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:t._sessionResponse})}}const{data:h,error:c}=l;if(c||!h)return{data:{user:null,session:null},error:c};const u=h.session,d=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:d,session:u},error:null}}catch(a){if((0,r.isAuthError)(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let i;if(await this._removeSession(),"email"in e){const{email:s,password:r,options:o}=e;i=await(0,t._request)(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:r,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:t._sessionResponse})}else{if(!("phone"in e))throw new r.AuthInvalidCredentialsError("You must provide either an email or phone number and a password");{const{phone:s,password:r,options:o}=e;i=await(0,t._request)(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:r,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:t._sessionResponse})}}const{data:o,error:n}=i;return n?{data:{user:null,session:null},error:n}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:{user:o.user,session:o.session},error:n}):{data:{user:null,session:null},error:new r.AuthInvalidTokenResponseError}}catch(s){if((0,r.isAuthError)(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,r,t,i;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(t=e.options)||void 0===t?void 0:t.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){const s=await(0,i.getItemAsync)(this.storage,`${this.storageKey}-code-verifier`),{data:o,error:n}=await(0,t._request)(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:s},xform:t._sessionResponse});return await(0,i.removeItemAsync)(this.storage,`${this.storageKey}-code-verifier`),n?{data:{user:null,session:null},error:n}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:n}):{data:{user:null,session:null},error:new r.AuthInvalidTokenResponseError}}async signInWithIdToken(e){await this._removeSession();try{const{options:i,provider:o,token:n,access_token:a,nonce:l}=e,h=await(0,t._request)(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:n,access_token:a,nonce:l,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:t._sessionResponse}),{data:c,error:u}=h;return u?{data:{user:null,session:null},error:u}:c&&c.session&&c.user?(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u}):{data:{user:null,session:null},error:new r.AuthInvalidTokenResponseError}}catch(s){if((0,r.isAuthError)(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,o,n,a,l;try{if(await this._removeSession(),"email"in e){const{email:r,options:n}=e;let a=null,l=null;if("pkce"===this.flowType){const e=(0,i.generatePKCEVerifier)();await(0,i.setItemAsync)(this.storage,`${this.storageKey}-code-verifier`,e),l=e===(a=await(0,i.generatePKCEChallenge)(e))?"plain":"s256"}const{error:h}=await(0,t._request)(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:r,data:null!==(s=null==n?void 0:n.data)&&void 0!==s?s:{},create_user:null===(o=null==n?void 0:n.shouldCreateUser)||void 0===o||o,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:a,code_challenge_method:l},redirectTo:null==n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:s,options:r}=e,{data:i,error:o}=await(0,t._request)(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(a=null==r?void 0:r.shouldCreateUser)||void 0===a||a,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!==(l=null==r?void 0:r.channel)&&void 0!==l?l:"sms"}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new r.AuthInvalidCredentialsError("You must provide either an email or phone number.")}catch(h){if((0,r.isAuthError)(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(e){var s,i;try{"email_change"!==e.type&&"phone_change"!==e.type&&await this._removeSession();let n=void 0,a=void 0;"options"in e&&(n=null===(s=e.options)||void 0===s?void 0:s.redirectTo,a=null===(i=e.options)||void 0===i?void 0:i.captchaToken);const{data:l,error:h}=await(0,t._request)(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:n,xform:t._sessionResponse});if(h)throw h;if(!l)throw new Error("An error occurred on token verification.");const c=l.session,u=l.user;return(null==c?void 0:c.access_token)&&(await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if((0,r.isAuthError)(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var s,i,o;try{return await this._removeSession(),await(0,t._request)(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(i=null===(s=e.options)||void 0===s?void 0:s.redirectTo)&&void 0!==i?i:void 0}),(null===(o=null==e?void 0:e.options)||void 0===o?void 0:o.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:t._ssoResponse})}catch(n){if((0,r.isAuthError)(n))return{data:null,error:n};throw n}}async reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:i}=e;if(i)throw i;if(!s)throw new r.AuthSessionMissingError;const{error:o}=await(0,t._request)(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if((0,r.isAuthError)(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{"email_change"!=e.type&&"phone_change"!=e.type&&await this._removeSession();const i=`${this.url}/resend`;if("email"in e){const{email:s,type:r,options:o}=e,{error:n}=await(0,t._request)(this.fetch,"POST",i,{headers:this.headers,body:{email:s,type:r,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},redirectTo:null==o?void 0:o.emailRedirectTo});return{data:{user:null,session:null},error:n}}if("phone"in e){const{phone:s,type:r,options:o}=e,{data:n,error:a}=await(0,t._request)(this.fetch,"POST",i,{headers:this.headers,body:{phone:s,type:r,gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}}});return{data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:a}}throw new r.AuthInvalidCredentialsError("You must provide either an email or phone number and a type")}catch(s){if((0,r.isAuthError)(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return this._useSession(async e=>e)}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{return await(0,i.stackGuardsSupported)()?(0,i.isInStackGuard)("_acquireLock")?(this._debug("#_acquireLock","recursive call"),await s()):await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{return await(0,i.stackGuard)("_acquireLock",async()=>await s())}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey)}}):(this._debug("#_acquireLock","Stack guards not supported, so exclusive locking is not performed as it can lead to deadlocks if the lock is attempted to be recursively acquired (as the recursion cannot be detected)."),await s())}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{if((0,i.isInStackGuard)("_useSession")){this._debug("#_useSession","recursive call");const s=await this.__loadSession();return await e(s)}return await this._acquireLock(-1,async()=>await(0,i.stackGuard)("_useSession",async()=>{const s=await this.__loadSession();return await e(s)}))}finally{this._debug("#_useSession","end")}}async __loadSession(){if(this._debug("#__loadSession()","begin"),this.logDebugMessages&&!(0,i.isInStackGuard)("_useSession")&&await(0,i.stackGuardsSupported)())throw new Error("Please use #_useSession()");(0,i.isInStackGuard)("_initialize")&&this._debug("#__loadSession","#_initialize recursion detected",(new Error).stack),await this.initializePromise;try{let e=null;if(this.persistSession){const s=await(0,i.getItemAsync)(this.storage,this.storageKey);this._debug("#getSession()","session from storage",s),null!==s&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession()))}else e=this.inMemorySession,this._debug("#getSession()","session from memory",e);if(!e)return{data:{session:null},error:null};const s=!!e.expires_at&&e.expires_at<=Date.now()/1e3;if(this._debug("#__loadSession()",`session has${s?"":" not"} expired`,"expires_at",e.expires_at),!s)return{data:{session:e},error:null};const{session:r,error:t}=await this._callRefreshToken(e.refresh_token);return t?{data:{session:null},error:t}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){try{return e?await(0,t._request)(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:t._userResponse}):await this._useSession(async e=>{var s,r;const{data:i,error:o}=e;if(o)throw o;return await(0,t._request)(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(r=null===(s=i.session)||void 0===s?void 0:s.access_token)&&void 0!==r?r:void 0,xform:t._userResponse})})}catch(s){if((0,r.isAuthError)(s))return{data:{user:null},error:s};throw s}}async updateUser(e,s={}){try{return await this._useSession(async i=>{const{data:o,error:n}=i;if(n)throw n;if(!o.session)throw new r.AuthSessionMissingError;const a=o.session,{data:l,error:h}=await(0,t._request)(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==s?void 0:s.emailRedirectTo,body:e,jwt:a.access_token,xform:t._userResponse});if(h)throw h;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(i){if((0,r.isAuthError)(i))return{data:{user:null},error:i};throw i}}_decodeJWT(e){return(0,i.decodeJWTPayload)(e)}async setSession(e){try{if(!e.access_token||!e.refresh_token)throw new r.AuthSessionMissingError;const t=Date.now()/1e3;let o=t,n=!0,a=null;const l=(0,i.decodeJWTPayload)(e.access_token);if(l.exp&&(n=(o=l.exp)<=t),n){const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!s)return{data:{user:null,session:null},error:null};a=s}else{const{data:s,error:r}=await this.getUser(e.access_token);if(r)throw r;a={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:o-t,expires_at:o},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(s){if((0,r.isAuthError)(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){try{return await this._useSession(async s=>{var t;if(!e){const{data:r,error:i}=s;if(i)throw i;e=null!==(t=r.session)&&void 0!==t?t:void 0}if(!(null==e?void 0:e.refresh_token))throw new r.AuthSessionMissingError;const{session:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if((0,r.isAuthError)(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e){try{if(!(0,i.isBrowser)())throw new r.AuthImplicitGrantRedirectError("No browser detected.");if("implicit"===this.flowType&&!this._isImplicitGrantFlow())throw new r.AuthImplicitGrantRedirectError("Not a valid implicit grant flow url.");if("pkce"==this.flowType&&!e)throw new r.AuthPKCEGrantCodeExchangeError("Not a valid PKCE flow url.");const t=(0,i.parseParametersFromURL)(window.location.href);if(e){if(!t.code)throw new r.AuthPKCEGrantCodeExchangeError("No code detected.");const{data:e,error:s}=await this.exchangeCodeForSession(t.code);if(s)throw s;const i=new URL(window.location.href);return i.searchParams.delete("code"),window.history.replaceState(window.history.state,"",i.toString()),{data:{session:e.session,redirectType:null},error:null}}if(t.error||t.error_description||t.error_code)throw new r.AuthImplicitGrantRedirectError(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});const{provider_token:o,provider_refresh_token:n,access_token:a,refresh_token:l,expires_in:h,token_type:c}=t;if(!(a&&h&&l&&c))throw new r.AuthImplicitGrantRedirectError("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(h),_=u+d,{data:f,error:w}=await this.getUser(a);if(w)throw w;const g={provider_token:o,provider_refresh_token:n,access_token:a,expires_in:d,expires_at:_,refresh_token:l,token_type:c,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(s){if((0,r.isAuthError)(s))return{data:{session:null,redirectType:null},error:s};throw s}}_isImplicitGrantFlow(){const e=(0,i.parseParametersFromURL)(window.location.href);return!(!(0,i.isBrowser)()||!e.access_token&&!e.error_description)}async _isPKCEFlow(){const e=(0,i.parseParametersFromURL)(window.location.href),s=await(0,i.getItemAsync)(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!s)}async signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var t;const{data:o,error:n}=s;if(n)return{error:n};const a=null===(t=o.session)||void 0===t?void 0:t.access_token;if(a){const{error:s}=await this.admin.signOut(a,e);if(s&&(!(0,r.isAuthApiError)(s)||404!==s.status&&401!==s.status))return{error:s}}return"others"!==e&&(await this._removeSession(),await(0,i.removeItemAsync)(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const s=(0,i.uuid)(),r={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,r),this._emitInitialSession(s),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async s=>{var r,t;try{const{data:{session:o},error:n}=s;if(n)throw n;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(i){await(null===(t=this.stateChangeEmitters.get(e))||void 0===t?void 0:t.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let o=null,n=null;if("pkce"===this.flowType){const e=(0,i.generatePKCEVerifier)();await(0,i.setItemAsync)(this.storage,`${this.storageKey}-code-verifier`,e),n=e===(o=await(0,i.generatePKCEChallenge)(e))?"plain":"s256"}try{return await(0,t._request)(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:o,code_challenge_method:n,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(a){if((0,r.isAuthError)(a))return{data:null,error:a};throw a}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await(0,i.retryable)(async r=>(await(0,i.sleep)(200*r),this._debug(s,"refreshing attempt",r),await(0,t._request)(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:t._sessionResponse})),(e,s,t)=>t&&t.error&&(0,r.isAuthRetryableFetchError)(t.error)&&Date.now()+200*(e+1)-n<c)}catch(o){if(this._debug(s,"error",o),(0,r.isAuthError)(o))return{data:{session:null,user:null},error:o};throw o}finally{this._debug(s,"end")}}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const r=await this._getUrlForProvider(e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",r),(0,i.isBrowser)()&&!s.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await(0,i.getItemAsync)(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const a=Math.round(Date.now()/1e3),l=(null!==(e=n.expires_at)&&void 0!==e?e:1/0)<a+s.EXPIRY_MARGIN;if(this._debug(t,`session has${l?"":" not"} expired with margin of ${s.EXPIRY_MARGIN}s`),l){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(console.error(e),(0,r.isAuthRetryableFetchError)(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(o){return this._debug(t,"error",o),void console.error(o)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var s,t;if(!e)throw new r.AuthSessionMissingError;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new i.Deferred;const{data:a,error:l}=await this._refreshAccessToken(e);if(l)throw l;if(!a.session)throw new r.AuthSessionMissingError;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const h={session:a.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(n){if(this._debug(o,"error",n),(0,r.isAuthError)(n)){const e={session:null,error:n};return null===(s=this.refreshingDeferred)||void 0===s||s.resolve(e),e}throw null===(t=this.refreshingDeferred)||void 0===t||t.reject(n),n}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,s,r=!0){const t=`#_notifyAllSubscribers(${e})`;this._debug(t,"begin",s,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,s)}catch(t){i.push(t)}});if(await Promise.all(o),i.length>0){for(let e=0;e<i.length;e+=1)console.error(i[e]);throw i[0]}}finally{this._debug(t,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&await this._persistSession(e)}_persistSession(e){return this._debug("#_persistSession()",e),(0,i.setItemAsync)(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),this.persistSession?await(0,i.removeItemAsync)(this.storage,this.storageKey):this.inMemorySession=null}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&(0,i.isBrowser)()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),c);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{const s=Date.now();try{return await this._useSession(async e=>{const{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const t=Math.floor((1e3*r.expires_at-s)/c);this._debug("#_autoRefreshTokenTick()",`access token expires in ${t} ticks, a tick lasts ${c}ms, refresh threshold is ${u} ticks`),t<=u&&await this._callRefreshToken(r.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!(0,i.isBrowser)()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=(async()=>await this._onVisibilityChanged(!1)),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){this._debug(`#_onVisibilityChanged(${e})`,"visibilityState",document.visibilityState),"visible"===document.visibilityState?setTimeout(async()=>{e||(await this.initializePromise,await this._recoverAndRefresh(),this._debug("#_onVisibilityChanged()","finished waiting for initialize, _recoverAndRefresh")),this.autoRefreshToken&&this._startAutoRefresh()},0):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s){const r=[`provider=${encodeURIComponent(e)}`];if((null==s?void 0:s.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(s.redirectTo)}`),(null==s?void 0:s.scopes)&&r.push(`scopes=${encodeURIComponent(s.scopes)}`),"pkce"===this.flowType){const e=(0,i.generatePKCEVerifier)();await(0,i.setItemAsync)(this.storage,`${this.storageKey}-code-verifier`,e);const s=await(0,i.generatePKCEChallenge)(e),t=e===s?"plain":"s256";this._debug("PKCE","code verifier",`${e.substring(0,5)}...`,"code challenge",s,"method",t);const o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(t)}`});r.push(o.toString())}if(null==s?void 0:s.queryParams){const e=new URLSearchParams(s.queryParams);r.push(e.toString())}return`${this.url}/authorize?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var r;const{data:i,error:o}=s;return o?{data:null,error:o}:await(0,t._request)(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null==i?void 0:i.session)||void 0===r?void 0:r.access_token})})}catch(s){if((0,r.isAuthError)(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var r,i;const{data:o,error:n}=s;if(n)return{data:null,error:n};const{data:a,error:l}=await(0,t._request)(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:null===(r=null==o?void 0:o.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:((null===(i=null==a?void 0:a.totp)||void 0===i?void 0:i.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(s){if((0,r.isAuthError)(s))return{data:null,error:s};throw s}}async _verify(e){try{return await this._useSession(async s=>{var r;const{data:i,error:o}=s;if(o)return{data:null,error:o};const{data:n,error:a}=await(0,t._request)(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null==i?void 0:i.session)||void 0===r?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+n.expires_in},n)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",n),{data:n,error:a})})}catch(s){if((0,r.isAuthError)(s))return{data:null,error:s};throw s}}async _challenge(e){try{return await this._useSession(async s=>{var r;const{data:i,error:o}=s;return o?{data:null,error:o}:await(0,t._request)(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:null===(r=null==i?void 0:i.session)||void 0===r?void 0:r.access_token})})}catch(s){if((0,r.isAuthError)(s))return{data:null,error:s};throw s}}async _challengeAndVerify(e){const{data:s,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const r=(null==e?void 0:e.factors)||[],t=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:t},error:null}}async _getAuthenticatorAssuranceLevel(){return await this._useSession(async e=>{var s,r;const{data:{session:t},error:i}=e;if(i)return{data:null,error:i};if(!t)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(t.access_token);let n=null;o.aal&&(n=o.aal);let a=n;return(null!==(r=null===(s=t.user.factors)||void 0===s?void 0:s.filter(e=>"verified"===e.status))&&void 0!==r?r:[]).length>0&&(a="aal2"),{data:{currentLevel:n,nextLevel:a,currentAuthenticationMethods:o.amr||[]},error:null}})}}exports.default=_,_.nextInstanceID=0;
},{"./GoTrueAdminApi":"r5yK","./lib/constants":"FCUC","./lib/errors":"fEKz","./lib/fetch":"qz1X","./lib/helpers":"aK8w","./lib/local-storage":"nFV6","./lib/polyfills":"tYyX","./lib/version":"yMJF"}],"jQAZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.internals=exports.NavigatorLockAcquireTimeoutError=void 0,exports.navigatorLock=a;const e={debug:!(!globalThis||!globalThis.localStorage||"true"!==globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"))};exports.internals=e;class o extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}async function a(a,l,r){e.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",a,l);let t=null,i=null;const s=new Promise((e,o)=>{t=e,i=o}),u=(async()=>{await s,e.debug&&console.log("@supabase/gotrue-js: navigatorLock: operation start");try{return await r()}finally{e.debug&&console.log("@supabase/gotrue-js: navigatorLock: operation end")}})(),n=new globalThis.AbortController;return l>0&&setTimeout(()=>{t=null,n.abort(),i&&(e.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",a),i&&i(new o(`Acquiring an exclusive Navigator LockManager lock "${a}" timed out after ${l}ms`)),t=null,i=null)},l),await globalThis.navigator.locks.request(a,{mode:"exclusive",ifAvailable:0===l,signal:n.signal},async l=>{if(l){e.debug&&console.log("@supabase/gotrue-js: navigatorLock acquired",a);try{t&&(t(),t=null,i=null,await u)}catch(r){}finally{e.debug&&console.log("@supabase/gotrue-js: navigatorLock released",a)}}else{e.debug&&console.log("@supabase/gotrue-js: navigatorLock not immediately available",a),new Error(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`).isAcquireTimeout=!0,i&&i(new o(`Acquiring an exclusive Navigator LockManager lock "${a}" immediately failed`)),t=null,i=null}}),await u}exports.NavigatorLockAcquireTimeoutError=o;
},{}],"jHY6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={GoTrueAdminApi:!0,GoTrueClient:!0,navigatorLock:!0,NavigatorLockAcquireTimeoutError:!0,lockInternals:!0};Object.defineProperty(exports,"GoTrueAdminApi",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"GoTrueClient",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"NavigatorLockAcquireTimeoutError",{enumerable:!0,get:function(){return u.NavigatorLockAcquireTimeoutError}}),Object.defineProperty(exports,"lockInternals",{enumerable:!0,get:function(){return u.internals}}),Object.defineProperty(exports,"navigatorLock",{enumerable:!0,get:function(){return u.navigatorLock}});var r=i(require("./GoTrueAdminApi")),t=i(require("./GoTrueClient")),o=require("./lib/types");Object.keys(o).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===o[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return o[r]}}))});var n=require("./lib/errors");Object.keys(n).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===n[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return n[r]}}))});var u=require("./lib/locks");function i(e){return e&&e.__esModule?e:{default:e}}
},{"./GoTrueAdminApi":"r5yK","./GoTrueClient":"jaRo","./lib/types":"kHZ4","./lib/errors":"fEKz","./lib/locks":"jQAZ"}],"HmDl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SupabaseAuthClient=void 0;var e=require("@supabase/gotrue-js");class s extends e.GoTrueClient{constructor(e){super(e)}}exports.SupabaseAuthClient=s;
},{"@supabase/gotrue-js":"jHY6"}],"ruhK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("@supabase/functions-js"),t=require("@supabase/postgrest-js"),s=require("@supabase/realtime-js"),i=require("@supabase/storage-js"),n=require("./lib/constants"),r=require("./lib/fetch"),a=require("./lib/helpers"),h=require("./lib/SupabaseAuthClient"),l=function(e,t,s,i){return new(s||(s=Promise))(function(n,r){function a(e){try{l(i.next(e))}catch(t){r(t)}}function h(e){try{l(i.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(a,h)}l((i=i.apply(e,t||[])).next())})};const o={headers:n.DEFAULT_HEADERS},u={schema:"public"},c={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},d={};class g{constructor(e,s,i){var n,h,l,g,p,b,v,f;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const m=(0,a.stripTrailingSlash)(e);this.realtimeUrl=`${m}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${m}/auth/v1`,this.storageUrl=`${m}/storage/v1`,this.functionsUrl=`${m}/functions/v1`;const y=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,A={db:u,realtime:d,auth:Object.assign(Object.assign({},c),{storageKey:y}),global:o},C=(0,a.applySettingDefaults)(null!=i?i:{},A);this.storageKey=null!==(h=null===(n=C.auth)||void 0===n?void 0:n.storageKey)&&void 0!==h?h:"",this.headers=null!==(g=null===(l=C.global)||void 0===l?void 0:l.headers)&&void 0!==g?g:{},this.auth=this._initSupabaseAuthClient(null!==(p=C.auth)&&void 0!==p?p:{},this.headers,null===(b=C.global)||void 0===b?void 0:b.fetch),this.fetch=(0,r.fetchWithAuth)(s,this._getAccessToken.bind(this),null===(v=C.global)||void 0===v?void 0:v.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},C.realtime)),this.rest=new t.PostgrestClient(`${m}/rest/v1`,{headers:this.headers,schema:null===(f=C.db)||void 0===f?void 0:f.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new e.FunctionsClient(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new i.StorageClient(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},s){return this.rest.rpc(e,t,s)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return l(this,void 0,void 0,function*(){const{data:s}=yield this.auth.getSession();return null!==(t=null===(e=s.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:i,storageKey:n,flowType:r,debug:a},l,o){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new h.SupabaseAuthClient({url:this.authUrl,headers:Object.assign(Object.assign({},u),l),storageKey:n,autoRefreshToken:e,persistSession:t,detectSessionInUrl:s,storage:i,flowType:r,debug:a,fetch:o})}_initRealtimeClient(e){return new s.RealtimeClient(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,s){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===s?"SIGNED_OUT"===e&&(this.realtime.setAuth(this.supabaseKey),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!=s?s:null),this.changedAccessToken=s)}}exports.default=g;
},{"@supabase/functions-js":"AtCQ","@supabase/postgrest-js":"aLgD","@supabase/realtime-js":"DDXl","@supabase/storage-js":"ToC9","./lib/constants":"ulZb","./lib/fetch":"MXCq","./lib/helpers":"mjti","./lib/SupabaseAuthClient":"HmDl"}],"zl3U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={createClient:!0,SupabaseClient:!0,FunctionsHttpError:!0,FunctionsFetchError:!0,FunctionsRelayError:!0,FunctionsError:!0};Object.defineProperty(exports,"FunctionsError",{enumerable:!0,get:function(){return n.FunctionsError}}),Object.defineProperty(exports,"FunctionsFetchError",{enumerable:!0,get:function(){return n.FunctionsFetchError}}),Object.defineProperty(exports,"FunctionsHttpError",{enumerable:!0,get:function(){return n.FunctionsHttpError}}),Object.defineProperty(exports,"FunctionsRelayError",{enumerable:!0,get:function(){return n.FunctionsRelayError}}),Object.defineProperty(exports,"SupabaseClient",{enumerable:!0,get:function(){return r.default}}),exports.createClient=void 0;var r=u(require("./SupabaseClient")),t=require("@supabase/gotrue-js");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===t[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var n=require("@supabase/functions-js"),o=require("@supabase/realtime-js");function u(e){return e&&e.__esModule?e:{default:e}}Object.keys(o).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||r in exports&&exports[r]===o[r]||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return o[r]}}))});const s=(e,t,n)=>new r.default(e,t,n);exports.createClient=s;
},{"./SupabaseClient":"ruhK","@supabase/gotrue-js":"jHY6","@supabase/functions-js":"AtCQ","@supabase/realtime-js":"DDXl"}],"Focm":[function(require,module,exports) {
"use strict";var t=require("@supabase/supabase-js");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function e(){e=function(){return t};var t={},n=Object.prototype,o=n.hasOwnProperty,i=Object.defineProperty||function(t,r,e){t[r]=e.value},a="function"==typeof Symbol?Symbol:{},c=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",f=a.toStringTag||"@@toStringTag";function s(t,r,e){return Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}),t[r]}try{s({},"")}catch(k){s=function(t,r,e){return t[r]=e}}function l(t,r,e,n){var o=r&&r.prototype instanceof y?r:y,a=Object.create(o.prototype),c=new N(n||[]);return i(a,"_invoke",{value:E(t,e,c)}),a}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(k){return{type:"throw",arg:k}}}t.wrap=l;var p={};function y(){}function v(){}function d(){}var m={};s(m,c,function(){return this});var g=Object.getPrototypeOf,w=g&&g(g(S([])));w&&w!==n&&o.call(w,c)&&(m=w);var b=d.prototype=y.prototype=Object.create(m);function x(t){["next","throw","return"].forEach(function(r){s(t,r,function(t){return this._invoke(r,t)})})}function L(t,e){var n;i(this,"_invoke",{value:function(i,a){function c(){return new e(function(n,c){!function n(i,a,c,u){var f=h(t[i],t,a);if("throw"!==f.type){var s=f.arg,l=s.value;return l&&"object"==r(l)&&o.call(l,"__await")?e.resolve(l.__await).then(function(t){n("next",t,c,u)},function(t){n("throw",t,c,u)}):e.resolve(l).then(function(t){s.value=t,c(s)},function(t){return n("throw",t,c,u)})}u(f.arg)}(i,a,n,c)})}return n=n?n.then(c,c):c()}})}function E(t,r,e){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return _()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=j(a,e);if(c){if(c===p)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if("suspendedStart"===n)throw n="completed",e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n="executing";var u=h(t,r,e);if("normal"===u.type){if(n=e.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n="completed",e.method="throw",e.arg=u.arg)}}}function j(t,r){var e=r.method,n=t.iterator[e];if(void 0===n)return r.delegate=null,"throw"===e&&t.iterator.return&&(r.method="return",r.arg=void 0,j(t,r),"throw"===r.method)||"return"!==e&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+e+"' method")),p;var o=h(n,t.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,p;var i=o.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,p)}function I(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function N(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function S(t){if(t){var r=t[c];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var e=-1,n=function r(){for(;++e<t.length;)if(o.call(t,e))return r.value=t[e],r.done=!1,r;return r.value=void 0,r.done=!0,r};return n.next=n}}return{next:_}}function _(){return{value:void 0,done:!0}}return v.prototype=d,i(b,"constructor",{value:d,configurable:!0}),i(d,"constructor",{value:v,configurable:!0}),v.displayName=s(d,f,"GeneratorFunction"),t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===v||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,f,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(L.prototype),s(L.prototype,u,function(){return this}),t.AsyncIterator=L,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new L(l(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},x(b),s(b,f,"Generator"),s(b,c,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),t.keys=function(t){var r=Object(t),e=[];for(var n in r)e.push(n);return e.reverse(),function t(){for(;e.length;){var n=e.pop();if(n in r)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=S,N.prototype={constructor:N,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function e(e,n){return a.type="throw",a.arg=t,r.next=e,n&&(r.method="next",r.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],a=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var c=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),p},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),p}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,e){return this.delegate={iterator:S(t),resultName:r,nextLoc:e},"next"===this.method&&(this.arg=void 0),p}},t}function n(t,r,e,n,o,i,a){try{var c=t[i](a),u=c.value}catch(f){return void e(f)}c.done?r(u):Promise.resolve(u).then(n,o)}function o(t){return function(){var r=this,e=arguments;return new Promise(function(o,i){var a=t.apply(r,e);function c(t){n(a,o,i,c,u,"next",t)}function u(t){n(a,o,i,c,u,"throw",t)}c(void 0)})}}var i="https://tjpowysgkmnciunvbahz.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRqcG93eXNna21uY2l1bnZiYWh6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTA5MzAwNDEsImV4cCI6MjAwNjUwNjA0MX0.tftvmyNUrwNAYAqwdSzVkJSzYuJAX7NYD4imfpClrd4",c=(0,t.createClient)(i,a),u=function(){var t=o(e().mark(function t(){var r,n,o;return e().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.from("test").select("*");case 2:r=t.sent,n=r.data,o=r.error,console.log("Data:",n),console.log("Error:",o);case 7:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();u();
},{"@supabase/supabase-js":"zl3U"}],"eDUB":[function(require,module,exports) {
module.exports=function(n){return new Promise(function(e,o){var r=document.createElement("script");r.async=!0,r.type="text/javascript",r.charset="utf-8",r.src=n,r.onerror=function(n){r.onerror=r.onload=null,o(n)},r.onload=function(){r.onerror=r.onload=null,e()},document.getElementsByTagName("head")[0].appendChild(r)})};
},{}],0:[function(require,module,exports) {
var b=require("ZOfP");b.register("js",require("eDUB"));b.load([["browser-ponyfill.79a645bd.js","vTPr"]]).then(function(){require("Focm");});
},{}]},{},[0], null)
//# sourceMappingURL=supabase-test.34bd29f0.js.map